# $Id$
# CPSDefault TODO

# milestones -----------------------------------------------
- [08/30] CPSDefault first release
   should contain all 'on work priority tasks 1.102

# on work priority tasks -----------------------------------
- [ben] portal_boxes (known as portlets or portal tool)
   o boxes
      o image box

- workflow
   o implement copy/paste workflow
   o i18n make an action to localize a document
      o make portal_tree i18n ?
   o how to notify reject or accept transition ?
      add a submitter variable to the wf updated only on new/creation
      then notify submitter ?

- misc
   o improve batch mode ala google
   o clean cmf actions stuff ? undo ? preference ? favorite ?
      fix persistance pb on portal[]._actions stuff
   o navigation
      how to stay in folder_content or folder_view mode ?
   o actionify *
      make everything an action header_menu new print (copy/paste)?
   o remove durty code
      o context_url and context_urlc
      x [] box attributes : macro/format/style macro vs portal_type ...

# other tasks ----------------------------------------------
- CPSDefault
   o users
      o how to remove roles for a user in a folder ?
         These are all closely related to the work lennart is doing
         (plugin user folder for SSL+LDAP+ZODB Users+Groups support)
         should talk to lennart first so we don't do anything double
      x [] add anonymous access
         boxes should take care about guard and permission
      x [] handle group in local roles management
         x [] empty search should return list of groups
      x [alex] local roles page should display aquisition roles
         x [julien] display the folder where they are define will be cool
           with a link to the folder local roles setting
      x [julien] put member's folder into workspaces
      x [julien] NuxMetaDirectories integration
         x [] cpsupdate integration
         x [] skins integration.
      x [] update user box title with the full name + link to directory

   o portal_boxes
      o [] boxes types
         o images, flash
         o calendar
         o favorites
         o RSS
         x [] ContentBox
            x [] display search result (separate search box?)
            x [] attributes: sort, format, number of doc ...
         x [] ActionBox to be finished
         x [] TextBox display static text
         x [] TreeBox
         x [] ActionBox
      x [] skinnable folder
         use a the center slot to skin a folder
      x [ben] make cps ui to manage boxes
      x [] override with personal boxes objects and settings in ~.cps_boxes
        o global settings for which settings that can be overridden to
         enable the site manager to prevent for example moving of boxes
         between slots
      x [lennart+ben] designing
      x [] make .cps_boxes a portal_type with a 'settings' attributes
         settings is a dictionary: path, box_id, xpos, ypos, visible, style?
      x [] make getBoxes work
         search for box object from root to current path
         loading box object and update settings dictionnary
      x [lennart] Set up guards for Permissions, roles and expressions
         x [] implement guards
         x [] Remove the current need to have view permissions. Permissions
           should only be controlled by the guards.
      x [] boxes attributes
         x [] display only in subfoldrer
         x [] locked
         x [] available in sub folder
      x [] make a ZMI interface for setting overrides
      x [] slots should be defined and managed in portal_boxes
      x [] box management
         x [] add a new box page
         x [] box settings page
         x [] box override should be handle using zmi ui
         x [] minimize maximize close

   x [] workflow and docs
      x [] impl skin rejectimpl skin unpublish
      x [] impl skin accept
      x [] impl skin proxy history i.e wf history
      x [] add wf variables: transition, date, user
      x [] display history of a document = * proxies history
      x [] content_submit_form: add link from existing document to the document
      x [flo] make a workflow history tool
         using doc_id as pkey
      x [] how to check permission, trying proxy access ?
         for the moment display * history for doc_id
      x [flo] have a consistant history merging translation between wf
         with src and destination
      x [flo] make accept transition working as un update
      x [] if the document is already published in the section,
      x [flo] make reject transition working
      x [flo] make unpublish transition working

   o folder
      o add constraint on type of document for workspace/creation
        and sections/publication
      o quota folder
         o display size of contents and folders
      o add icon/images attributes
      x [] display sections and workspaces tree
      x [] folder_contents with more info
        display proxy rev, lang, status

   o document
      x [] full info skin: list all proxy about a document

   o cmf integration
      x [] remove my stuff ? preference ? favorite ?

   x [] element integration: infinite postpone

   o [encolpe] search
      o use textindex NG by default
      x [] make catalog search work with proxies
      x [] CPSCore CPSBaseDocument should implement SearchableText method
      x [] make advanced search with status metadata ...
      x [] i18n

   o cpsinstaller
      x [] don't need any more to rename folder actions
      o long term: big refactoring to enable registration of products

   o zpt usage
      x [] finish display_content macro add a cookie to remind option
        icon/detail + sort order + filter ?
      x [] clean header of use-macro with tag <html xmlns ...
      x [] handle batch sorting
        sort is done in getFolderContent
      x [] evaluate plone css1 with netscape 4.77
        workable but with a different look, acceptable for now ?
      x [] define compatible html usage with both css
      x [] try to use plone css for main_template
      x [] manage contextual css
      x [] manage printable css
      x [] restrict access to test_*_lib ?
           use a separate skin devel

   x [] i18n
      x [] audit i18n tools opental:i18n_xgettext/kbabel/msgmerge ...
      x [] eval domain usage
      x [julien] write doc/HOWTO.i18n + tools
         Check the pot/po files utilities providing an easy way
         to create, manage and update them within a product.
      x [] have a full cpsdefault in fr/en

   o tests
      o unit tests for Dummy and Folder
      o add puffin test to create big amount of docs ?
         puffin is buggy !#@#

   o misc
      o finalize zmi CPSSite form creation
      o rewrite cpsinstaller
      o benching framework
            need script to create big amount of docs
      x [] broken object action on '/': metadata or folder content
        fix folder content and folder view navigation
      x [] i18n breadcrumbs override in search form is no l10n !!!
      x [] sort object in folder use move_object_up/down in content_folder_view
      x [] add option sort/format
         x [] in folder content
      x [] manage user properties for default sort and format
      x [] split skin repository into: cps_devel, cps_css, ...
      x [] use macro library
      x [] add benching tools
      x [] refactoring cpssite suite
      x [] add rpath in the dbg info of master
      x [julien] find a way to override breadcrumb
          CPS2 like : setting a variable "breadcrumb_set" in the REQUEST
          to override the breadcrumb. (Cf. Directories or the search forms)
         x [] use it in search form, directories

# bugs or blocking tasks -----------------------------------
- Bug fix
   o fix duplicate registration for 'CPSDefault' and 'CPS Default' in ZMI
   o puffin is buggy cps return __ac_name after __ac and we can not
      store the login cookie :/
   x [] advanced search, search link broken on result page
      url like //search_form
   x [fg] error after install in generic_lib no standard:'item/title'
      happened because new skins were not immediately available
   x [] url in breadcrumbs broken
   x [] set local roles page should display acquisition roles
   x [] find a way not using tal before xml declaration in zpt
      ok htmlns will be removed
   x [] getInfoFor review_state failed if not owner or manager ????
   x [] folder_contents permission denied for SectionReader on folder
     with pending (in_submit) document
   x [] content_publish_form should display only section with
     SectionReader rights
   x [] folder_contents display links with broken path
     if there are a missing trailing '/' in the URL
   x [] fix folder_edit_form do not save change

- Open questions
   o check that we can have many root sections and many workspace sections
   x [] how to handle proxy history for reject or accept transition ?
   x [] unpublish what's happen to the history of a doc
      how to remember that it was published and by who and when
      need workflow_history tool
      -> use the workflow history tool + user notification TBD
   x [] how and when shoud we delete a doc in the repository
     using a garbage collector checking doc without proxies ?
   x [] still need simple scenarii wf/multi version/multi language
   x [] how to accept multiple submit for a doc ?
      handle simple accept by section like CMF
   x [] how to allow unpublish for author
      allow unpublish only for reviewer

- Make CPSDemo product
   this product should be a skeleton for any new cps site
   o define basic document type like News, File ... using CPSDocuments
   o Integration of * NuxCPS2 products
   o example of cpsdemoupdate script
