<tal:block define="
                  dirtool nocall:here/portal_metadirectories;
                  mcat nocall:here/portal_messages;
                  dummy python:request.set('breadcrumb_set',
                    [{
                      'url': here.portal_url()+'/directories',
                      'title': '_str_Directories_',
                    }]);
                  hideactions python:1">
<html metal:use-macro="here/main_template/macros/master">
  <body>
    <metal:block fill-slot="header"
      tal:content="python:mcat('_str_Directories_')">
      Directories
    </metal:block>
    <metal:block fill-slot="header_plus"></metal:block>

    <metal:block tal:define="directories dirtool/objectValues;"
        fill-slot="main">
      <tal:block condition="directories">
        <metal:block use-macro="here/main_widgets/macros/title_content">
          <metal:block fill-slot="title"
            tal:content="python:mcat('_Choose a directory_')">
            Choose a directory
          </metal:block>
          <metal:block fill-slot="content">
            <ul>
              <li tal:repeat="directory directories">
                <a href="." tal:attributes="href string:${directory/search_template}?dirname=${directory/id}" tal:content="python:mcat(directory.title_or_id())">Directory</a><tal:block condition="directory/description"> (<tal:block replace="directory/description">Description</tal:block>)</tal:block>
              </li>
            </ul>
          </metal:block>
        </metal:block>
      </tal:block>
      <tal:block condition="not:directories">
        <p tal:content="python:mcat('_No directory available_')">
          No directory available
        </p>
      </tal:block>
    </metal:block>
  </body>
</html>
</tal:block>
