<html xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  metal:use-macro="here/main_template/macros/master">

  <body>
    <metal:block metal:fill-slot="main"
      tal:define="
      portal utool/getPortalObject;
      password_reset_enabled portal/enable_password_reset;
      password_reminder_enabled portal/enable_password_reminder;
      ">
      <h1 i18n:translate="heading_lost_password">Lost password</h1>
      <p tal:define="ptool here/portal_properties">
        <tal:block i18n:translate="help_lost_password">
          You came to this page because you have lost your password.
          Don't worry, it will soon be possible for you to login to the portal
          again.
          If you have problems using this form or if it doesn't work for you
          for any reason send an email to
        </tal:block>
        <a tal:define="email_address ptool/email_from_address"
          tal:attributes="href string:mailto:${email_address}?subject=[Lost%20password]"
          tal:content="email_address"
          href="mailto:admin@here.com">admin@here.com</a>.
      </p>

      <tal:block condition="password_reminder_enabled">
        <h2 i18n:translate="heading_password_reminder">Password reminder</h2>
        <p i18n:translate="help_password_reminder">
          With this functionality you can ask to receive a reminder of your
          password through an email message.
        </p>
        <form action="mail_password"
          tal:attributes="action string:${here/portal_url}/mail_password">
          <dl class="form">
            <dt><label for="username"
                i18n:translate="label_user_name">User name</label></dt>
            <dd><input type="text" name="username" id="username" class="focus"/>
            </dd>
          </dl>
          <p class="buttonArea">
            <input i18n:attributes="value" class="standalone" type="submit"
              value="button_send_password_reminder" />
          </p>
        </form>
      </tal:block>

      <tal:block condition="password_reset_enabled">
        <h2 i18n:translate="heading_password_reset">Password reset</h2>
        <p i18n:translate="help_password_reset">
          With this functionality you can request your old password to be reset
          and replaced by a new password automatically generated by the system.
          The new password will then be communicated to you.
        </p>
        <form action="mail_password"
          tal:attributes="action string:${here/portal_url}/account_request_reset_password">
          <dl class="form">
            <dt><label for="username_or_email"
                i18n:translate="label_user_name_or_email_address">
                User name or email address</label></dt>
            <dd><input type="text" name="username_or_email" id="username_or_email"
                class="focus"/>
            </dd>
          </dl>
          <p class="buttonArea">
            <input i18n:attributes="value" class="standalone" type="submit"
              value="button_request_reset_password" />
          </p>
        </form>
      </tal:block>

    </metal:block>
  </body>
</html>
