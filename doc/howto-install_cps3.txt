# $Id$
# Zope 2.6.1
make_zs

cd Products
# CMF 1.4
tar xzvf /home/zopes/_packages/CMF-1.4.tar.gz
mv CMF-1.4/CMF* .
rm -rf CMF-1.4

# Products
# dcworkflow cvs version ! 0.4.2 is bad
wget -O dc.tgz http://cvs.zope.org/CMF/DCWorkflow/DCWorkflow.tar.gz?tarball=1
tar xzvf dc.tgz; rm dc.tgz
tar xzvf /home/zopes/_packages/Localizer-1.0.0.tgz
tar xzvf /home/zopes/_packages/BTreeFolder2-0.5.0.tar.gz
tar xzvf /home/zopes/_packages/TranslationService-0.3.tgz

# Packages for dev
tar xzvf /home/zopes/_packages/VerboseSecurity-0.5.tar.gz
# For po generation (Parsing the ZPT's)
# OpenPTi18n a little bit modified by Julien for convenience.
tar xzvf  /home/zopes/_packages/OpenPTi18n-nuxeo.tgz

# if you want to browse src from the zmi
tar xzvf /home/zopes/_packages/DocFinderEverywhere-0.4.1.tar.gz

cd ../lib/python/Testing
tar xzvf /home/zopes/_packages/ZopeTestCase-0.6.4.tar.gz
cd -

# Nuxeo package
tar xzvf /home/zopes/_packages/OrderedFolderSupportPatch-1.0.0-1.tgz
mv OrderedFolderSupportPatch-1.0.0 OrderedFolderSupportPatch

# NuxUserGroup > 0.9.0
tar xzvf /home/zopes/_packages/NuxUserGroups-0.9.0-1.tgz
mv NuxUserGroups-0.9.0 NuxUserGroups

# NuxMetaDirectories > 2.1.0
tar xzvf /home/zopes/_packages/NuxMetaDirectories-2.1.0-1.tgz
mv NuxMetaDirectories-2.1.0 NuxMetaDirectories

# CPSDocument
#tar xzvf /home/zopes/_packages/CPSDocument-0.1.0-1.tgz
#mv CPSDocument-2.1.0 CPSDocument

# or
cvs co CPSDocument

## CPS 3 packaged replace x.x by the latest version available
# tar xzvf /home/zopes/_packages/CPSCore-3.x.x.tgz
# mv CPSCore-3.x.x CPSCore
# tar xzvf /home/zopes/_packages/CPSDefault-3.x.x.tgz
# mv CPSDefault-3.x.x CPSDefault

## or CPS3 dev
# cvs co CPSCore
# cvs co CPSDefault

## For po utilities (DEV)
## note that this will add an error in the stupid log
## 2003-07-21T10:47:17 ERROR(200) Zope Couldn't install OpenPTi18n ...
cd ../bin
tar xvf /home/zopes/_packages/pax-1.0a3.tar
cd pax
../python setup.py build
../python setup.py install

cd ..
tar xvf /home/zopes/_packages/OpenTAL-0.5.tar
cd OpenTAL
../python setup.py build
../python setup.py install
cd ..

rm -rf ./pax ./OpenTAL


# for VerboseSecurity add in the start script (before the exec line)
ZOPE_SECURITY_POLICY=PYTHON
export ZOPE_SECURITY_POLICY


# running unit test to check the installation
# note that test log are located in $ZS/lib/python/Testing/var/stupid.log
cd Products/CPSDefault/
_ut -vv

# start zs
_start

## ZMI
# add a Virtual Host Monster
# add a CPSDefault Site ...
