<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/transition_form/macros/master">
<body>

<div metal:fill-slot="main" i18n:domain="cmf_default">

<h1 i18n:translate="">Submit <span tal:replace="here/getId"
                                    i18n:name="objectid">Item</span></h1>

<p i18n:translate="">To make an item published and viewable by readers, it
   has to be reviewed by one of the sections's reviewers.
 You can submit the item in many sections folder.<br/> A copy of the item will be created into each section with a <b>pending</b> status, waiting to be reviewed and finally <b>published</b> by a section's reviewer.</p>

</div>

<form>
<div metal:fill-slot="form" i18n:domain="cmf_default">
  <div tal:define="stree python: here.getSectionsTree();">
  <table>
    <tr><td width="30%"><b>Section</b></td><td><b>Existing revision of the same document</b></td></tr>
    
    <span tal:repeat="section stree">
    <tr tal:condition="python:'submit' in section['publishing_transitions']">
      <td>
        <span tal:replace="structure python:'&nbsp;'*4*section['depth']">&nbsp;</span>
	<input type="checkbox" name="." value="." tal:attributes="value section/rpath; name string:submit" />
        <span tal:replace="section/id">Section</span>
      </td>
      <td>
	<span tal:repeat="item history/states">
	  <small tal:condition="python:item['rpath'] == section['rpath']">
             Rev: <span tal:replace="item/rev">3</span>-<span tal:replace="item/lang">en</span>: <span tal:replace="item/review_state">State</span><br/>
          </small>
	</span>
      </td>
    </tr>
    </span>
  </table>
  </div>
  <input type="hidden" name="workflow_action" value="copy_submit" />
  <input type="submit" value="Submit item" i18n:attributes="value" />
  <input type="button" onClick="history.back()" value="Cancel" i18n:attributes="value" />
</div>
</form>
  
</body>
</html>
