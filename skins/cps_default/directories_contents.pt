<html tal:define="dirtool nocall:here/portal_metadirectories;
                  showthirdcol nothing;
                  directories dirtool/objectValues">
  <body metal:use-macro="here/main_template/macros/master">
    <metal:block fill-slot="title" i18n:translate="directories_index_title">
      Directories
    </metal:block>
    <metal:block fill-slot="main">
      <tal:block condition="directories">
        <metal:block use-macro="here/main_widgets/macros/title_content">
          <metal:block fill-slot="title" i18n:translate="choose_directory">
            Choose a directory
          </metal:block>
          <metal:block fill-slot="content">
            <table border="0" width="100%" cellpadding="0" cellspacing="0">
              <tr tal:repeat="directory directories">
                <td class="compact">
                    <a href="" tal:attributes="href string:directory_editentry_form?dirname=${directory/id}&create=1" 
                      tal:content="directory/title_or_id">Directory</a>
                    (<span tal:content="directory/description|nothing"> 
                      Description
                    </span>)
                </td>
                <td>
                  <a href="" tal:attributes="href string:${directory/search_template}?dirname=${directory/id}" i18n:translate="search_directory">
                   Search
                  </a>
                </td>
                <td>
                  <a href="" tal:attributes="href string:directory_editentry_form?dirname=${directory/id}&create=1" i18n:translate="add_directory">
                   Add
                  </a>
                </td>
              </tr>
            </table>
          </metal:block>
        </metal:block>
      </tal:block>
      <tal:block condition="not:directories">
        <p i18n:translate="no_directory_available">
          No directory available
        </p>
      </tal:block>
    </metal:block>
  </body>
</html>
