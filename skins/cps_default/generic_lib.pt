<!-- macro library for all general use -->
<!-- $Id$ -->

<!-- ============================================================ -->
<metal:block define-macro="portal_message">
<div class="document"
  tal:define="portal_status_message portal_status_message|request/portal_status_message|nothing"
  tal:condition="portal_status_message">
  <div class="message" i18n:translate="" tal:content="portal_status_message">
  Translated status message.
  </div>
</div>
</metal:block>


<!-- ============================================================ -->
<metal:block define-macro="breadcrumbs">
  <tal:block i18n:translate="label_you_are_here">You are
  here:&nbsp;</tal:block><tal:block repeat="bc
  python:here.getBreadCrumbs(url=context_url, breadcrumb_set=getattr(request,
  'breadcrumb_set', None))">
    <a href="/cps/id"
       tal:omit-tag="not:bc/url"
       tal:attributes="href bc/url;
                       title bc/longtitle"
       tal:content="bc/title">
       Title
    </a><strong
    tal:condition="not:repeat/bc/end">&nbsp;&gt;&nbsp;</strong></tal:block>
</metal:block>


<metal:block define-macro="search_form">
  <table border="0" width="100%" cellpadding="1" cellspacing="1">
    <tr>
      <td><span i18n:translate="label_search_title">Title</span></td>
      <td><input id="field_focus" name="Title" size="20"></td>
    </tr>
    <tr>
      <td><span i18n:translate="label_search_description">Description</span></td>
      <td><input name="Description" size="20"></td>
    </tr>
    <tr valign="top">
      <td> <span i18n:translate="label_search_plain_text">Plain text</span></td>
      <td><input name="SearchableText" size="40"></td>
    </tr>
    <tr tal:condition="python: checkPerm('Review portal content', here)">
      <td ><span i18n:translate="label_search_status">Status</span></td>
      <td>
      <select name="review_state">
        <option i18n:translate="label_all" value="" selected>All</option>
        <option i18n:translate="label_work" value="work">Work</option>
        <option i18n:translate="label_pending" value="pending">Pending</option>
        <option i18n:translate="label_published" value="published">Published</option>
      </select>
      </td>
      </tr>
      <tr>
        <td><span i18n:translate="label_search_modified_since">Modified since</span></td>
        <td tal:define="today python: here.ZopeTime().earliestTime();
                        mtool here/portal_membership;
                        member python:mtool.getAuthenticatedMember();
                        lastLogin member/last_login_time|nothing;
                        yesterday python:(today-1).Date();
                        lastWeek python:(today-7).Date();
                        lastMth python:(today-31).Date();">
         <select name="modified:date">
           <option value="1970/01/01 00:00:00 GMT"
                   i18n:translate="label_choose">Choisir
           </option>
           <option i18n:translate="time_last_login"
                   tal:attributes="value lastLogin"
                   tal:condition="python:not(here.portal_membership.isAnonymousUser())">
             time_last_login
           </option>
           <option i18n:translate="time_yesterday"
                   tal:attributes="value yesterday">time_yesterday</option>
           <option i18n:translate="time_last_week"
                   tal:attributes="value lastWeek">time_last_week</option>
           <option i18n:translate="time_last_month"
                   tal:attributes="value lastMth">time_last_month</option>
         </select>
         <input type="hidden" name="modified_usage" value="range:min">
         </td>
      </tr>
      <tr>
        <td></td>
        <td><br><input type="submit" class="context" i18n:attributes="value"
                   value="button_search"></td>
      </tr>
   </table>
</metal:block>
