<metal:html use-macro="here/main_template/macros/master">

<metal:main fill-slot="main"
  tal:define="context_urlc python:here.getContextUrl(utool=utool, concat=1);">

<div class="documentActions">
  <a href="box_create_form" i18n:translate="button_create_box"
    tal:attributes="href string:${context_urlc}/box_create_form">Add a box</a>
</div>
<h2 i18n:translate="heading_box_manage_form">Boxes management</h2>

<p i18n:translate="">
description_visible_box_from <span i18n:name="context_url"
tal:content="context_url" /></p>

<tal:block repeat="slot here/getBoxSlots">
<tal:block define="sboxes python:btool.filterBoxes(boxes, slot=slot);"
  condition="python:len(sboxes)">
<h3><img src="slot" tal:attributes="src string:${base_url}slot_${slot}.png"/>
    <span i18n:translate="label_slot" />: <span i18n:translate="" tal:content="string:label_${slot}">Slot</span></h3>


<form action="" method="post"
  tal:attributes="action string:${context_urlc}">

<table>
  <tr>
    <th></th>
    <th i18n:translate="listingheader_order">Order</th>
    <th i18n:translate="listingheader_type">Type</th>
    <th i18n:translate="listingheader_title">Title</th>
    <th i18n:translate="listingheader_location">location</th>
  </tr>
  <tal:block repeat="box sboxes">
  <tr tal:define="action python:box['box'].getTypeInfo().immediate_view"
    tal:attributes="bgcolor python:repeat['box'].odd() and '#EEEEEE' or nothing">
    <td><input type="checkbox" name="ids:list" value=""
          tal:attributes="value box/url;"
          tal:condition="python:checkPerm('Modify portal content', box['box'])"></td>
    <td align="right"><tal:block replace="box/box/order" /></td>
    <td><a href="" tal:attributes="href
      string:${context_urlc}/${action}?box_url=${box/url}">
      <tal:block
        i18n:translate="" content="python:box['box'].getTypeInfo().Title()" /></a></td>
    <td><tal:block replace="box/box/title" /></td>
    <td><tal:block replace="string:${base_url}${box/display_url}" /></td>
  </tr>
  </tal:block>
</table>
  <input type="submit" name="box_delete:method"
    value="button_delete_box" i18n:attributes="value">
<br>
<br>
</form>

</tal:block>
</tal:block>

</metal:main>

</metal:html>
