<!-- a content_lib macro -->
<!-- $Id$ -->

<!-- Display authorized proxies states for a document
  require getContentInfo 2
-->

<metal:block define-macro="states"
  tal:define="items python:info['states']">
      <h2 i18n:translate="label_current_revisions">Current revisions</h2>
      <p tal:condition="not:items"
        i18n:translate="info_no_published_revisions_of_this_document">
        There aren't any published revisions of this document.
      </p>
      <tal:block condition="items">
        <table class="history listing" summary="publication state">
          <thead>
            <tr>
              <th i18n:translate="label_date" align="center">Date</th>
              <th i18n:translate="label_revision" align="center">Version</th>
              <th i18n:translate="label_language" align="center">Langue</th>
              <th i18n:translate="label_status" align="center">Status</th>
              <th i18n:translate="label_location" align="center">Location</th>
            </tr>
          </thead>
          <tbody>
        <tr tal:repeat="item items"
          tal:attributes="class python:test(repeat['item'].odd(), 'odd', 'even')">
              <td tal:content="item/time_str" i18n:translate=""/>
              <td tal:content="item/rev" i18n:translate=""/>
              <td tal:content="string:label_language_${item/lang}" i18n:translate=""/>
              <td>
                <span tal:attributes="class item/review_state"
                  tal:content="item/review_state" i18n:translate=""/>
              </td>
              <td>
                <a href="."
                  tal:define="utool nocall:here/portal_url;
                              ob_url python:utool.getUrlFromRpath(item['rpath'])"
                  tal:attributes="href ob_url"
                  tal:content="item/title">Section 1</a>
              </td>
            </tr>
          </tbody>
        </table>
      </tal:block>
</metal:block>
