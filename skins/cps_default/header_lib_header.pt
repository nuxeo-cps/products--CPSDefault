<!-- a header_lib macro -->
<!-- $Id$ -->

<!--
some CSS loading hints:
- nuxeo_css1.css follows the CSS1 spec.
- nuxeo_css2.css follows the CSS2 spec.
  CSS1-only compliant browsers like Netscape 4.7.x only understand the
  link rel="stylesheet") syntax and not the "@import" CSS2 syntax.
  This is done to have CSS1-only compliant browsers not to try to interpret
  CSS2 properties and display badly CPS sites.
- msie.css it is used and read *only* by MSIE.
- custom.css is loaded if exists.

XXX this should referenced and documented in CPSDefault/doc/
-->

<!--
The MSIE PNG behavior is disabled by default but kept here in case you need it.
This MSIE behavior was supposed to work for MSIE >= 5.5, but *some* versions of
MSIE 5.5 have problems with it. So feel free to use it back again if your
visitors do not use MSIE 5.5 or when MSIE 5.5 becomes history.
-->
  <tal:block replace="structure string:&lt;!--[if IE]&gt;" /><link
    rel="stylesheet" type="text/css"
    tal:attributes="href string:${base_url}msie.css" /><tal:block
    replace="structure string:&lt;![endif]--&gt;" />

<metal:block define-macro="header" tal:define="charset string:ISO-8859-15">
  <tal:block define="dummy python:request.RESPONSE.setHeader('Content-Type',
    'text/html;; charset=%s' % charset)" />
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-15" />
  <meta name="generator" content="Nuxeo CPS http://www.cps-project.org/" />
  <title tal:content="expanded_title|here/expanded_title">CPS Default</title>
  <metal:block define-slot="base"></metal:block>
  <link rel="stylesheet" type="text/css" href=""
    tal:attributes="href string:${base_url}nuxeo_css1.css" />
  <style type="text/css" media="all"
    tal:content="string:@import url(${base_url}nuxeo_css2.css);"></style>
  <link rel="stylesheet" type="text/css" media="print"
    tal:attributes="href string:${base_url}nuxeo_print_css.css" />
  <link rel="icon" href="" type="image/png" tal:attributes="href
    string:${base_url}site_icon.png" />
  <meta http-equiv="imagetoolbar" content="no" />
  <metal:block define-slot="head_slot"></metal:block>
  <metal:block define-slot="css_slot"></metal:block>
  <style type="text/css" media="all"
    tal:condition="exists: here/custom.css"
    tal:content="string:@import url(${base_url}custom.css);"></style>
  <style type="text/css" media="all"
    tal:define="custom_css here/getCPSCustomCSS|nothing"
    tal:condition="custom_css"
    tal:content="string:@import url(${base_url}${custom_css});"></style>
  <metal:block define-slot="javascript_head_slot"></metal:block>
  <script type="text/javascript"
    tal:attributes="src string:${base_url}functions.js"></script>
</metal:block>
