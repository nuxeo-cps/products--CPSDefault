<html tal:define="showthirdcol nothing;
                 utool nocall:here/portal_url;	
                 portal_object utool/getPortalObject;
                 portal_title portal_object/title;
                 dummy python:request.set('breadcrumb_set',
                   [{
                   'id' : 'portal_root', 
                   'url': here.portal_url(),
                   'title': portal_title, 
                   'longtitle':portal_title,
                   },
                   {
                   'id' : 'search_form', 
                   'url': here.portal_url()+'/advanced_search_form',
                   'title': 'Advanced search', 
                   'longtitle':'Advanced search',
                   }, ]);
                 ">
<body metal:use-macro="here/main_template/macros/master">
  <div metal:fill-slot="main">
    <h1 i18n:translate="Advanced Search">
      Advanced search
    </h1>
    <form action="search" tal:attributes="action string:${base_url}search_form">
      <table class="FormLayout">
        <tr>
          <td><span i18n:translate="title">Title</span></td>
          <td><input name="Title" size="20"></td>
        </tr>
        <tr>
          <td><span i18n:translate="description">Description</span></td>
          <td><input name="Description" size="20"></td>
        </tr>
        <tr valign="top">
          <td> <span i18n:translate="plain_text">Plain text</span></td>
          <td><input name="SearchableText" size="40"></td>
        </tr>
        <tr tal:condition="python: here.portal_membership.checkPermission('Review portal content', here)">
          <td ><span i18n:translate="status">Status</span></td>
          <td>
          <select name="review_state">
            <option i18n:translate="all" i18n:attributes="value" value="-- All --" selected>All</option>
            <option i18n:translate="work" i18n:attributes="value" value="work">Work</option>
            <option i18n:translate="pending" i18n:attributes="value" value="pending">Pending</option>
            <option i18n:translate="published" i18n:attributes="value" value="published">Published</option>
          </select>
          </td>
          </tr>
          <tr>
            <td><span i18n:translate="modified_since">Modified since</span></td>
            <td tal:define="today python: here.ZopeTime().earliestTime();
                                          mtool here/portal_membership;
                                          member python:mtool.getAuthenticatedMember();
                                          lastLogin member/last_login_time|nothing;
                                          yesterday python:(today-1).Date();
                                          lastWeek python:(today-7).Date();
                                          lastMth python:(today-31).Date();">
             <select name="modified:date">
               <option i18n:translate="last_login" i18n:attributes="value"
                       value="last_login"
                       tal:condition="python:not(here.portal_membership.isAnonymousUser())">
                 last login
               </option>
               <option i18n:translate="yesterday" i18n:attributes="value" value="yesterday">yesterday</option>
               <option i18n:translate="last_week" i18n:attributes="value" value="last_week">last week</option>
               <option i18n:translate="last_month" i18n:attributes="value" value="last_month">last month</option>
             </select>
             <input type="hidden" name="modified_usage" value="range:min" />
             </td>
          </tr>
	  <tr>
            <td><br><input type="submit" value="Search"/></td>
          </tr>
       </table>
     </form>
   </div>
  </body>
</html>
