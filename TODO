# $Id$
# CPSDefault TODO

# milestones -----------------------------------------------
x [encolpe] 05/12: encolpe coding for CPSDefault
   postpone to 05/15 :( postpone 05/22 :(((
x [ben] 05/14: CPSDefault workable mainframe
- [florent] 05/26 +8d: CPSDocuments
- [] 06/18+3w: CPSDefault with portal_boxes/workflow/i18n/users
- [] 06/25: CPSDemo with few services tbd ...


# on work priority tasks -----------------------------------
- [lennart] portal_boxes (known as portlets or portal tool)
   x [lennart+ben] designing
   o make .cps_boxes a portal_type with a 'settings' attributes
      settings is a dictionary: path, box_id, xpos, ypos, visible, style?
   o make getBoxes work
      search for box object from root to current path
      loading box object and update settings dictionnary
      override with personal boxes objects and settings in ~.cps_boxes
   o make a .cps_boxes view screen to manage boxes positions
      save setting for local boxes into boxes object
      save setting for aquire boxes into folder settings dictionnary
   o use boxes attributes
      available in subfolder
      Condition
      Permission
   o how to manage ~/.cps_boxes/view ?

- [encolpe] search
   o make catalog search work with proxies
   o make advanced search with status metadata ...
   o reusable search with result list page for a popup version
      with checkbox/action ?
   o try to use content_lib macros as much as possible

- [seb+alex] users
   o handle group in local roles management
   o add anonymous access
   o put member's folder into workspaces
   o local roles page should display aquisition roles 
   o how to remove roles for a user in a folder ?
      These are all closely related to the work lennart is doing
      (plugin user folder for SSL+LDAP+ZODB Users+Groups support)
      should talk to lennart first so we don't do anything double
   o NuxMetaDirectories integration

- i18n usage
   o audit plone tools
   o add multi po loader like gilupdate
   o use one domain by product
   o write doc/HOWTO.i18n      

- workflow
  o [flo] make a workflow history tool
     using doc_id as pkey
     o how to check permission, trying proxy access ?
         for the moment display * history for doc_id
  o display list of pending document for a reviewer
      use a document box displaying the number of pending docs
      with a link to a search result
  o add wf_vars rpath src/dest + filter on review history copy_submit
  o add a comment on submit from copy_submit
      o need to propagte args between transitions
  o how to notify reject or accept transition ?
      add a submitter variable to the wf updated only on new/creation
      then notify submitter ?

- misc
   o actionify *
      make everything an action header_menu new print (copy/paste)?  ...
   o benching framework
      need script to create big amount of docs


# other tasks ----------------------------------------------
- CPSDefault
   o workflow and docs
      o impl skin reject
      o impl skin unpublish
      x [] impl skin accept
      x [] impl skin proxy history i.e wf history
      x [] add wf variables: transition, date, user
      x [] display history of a document = * proxies history
      x [] content_submit_form: add link from existing document to the document
   o folder
      o impl folder_factories_form 
        check perms for creating/display sub section/workspace action
      o add constraint on type of document for workspace/creation
        and sections/publication
      o quota folder
         o display size of contents and folders
      x [] display sections and workspaces tree
      x [] folder_contents with more info
        display proxy rev, lang, status
   o document
      o impl copy/cut/paste ...
         same for rename delete history ...
      x [] full info skin: list all proxy about a document
   o cmf integration
      o clean or integrate fully cmf stuff ? undo ? preference ? favorite ?
      x [] remove my stuff ? preference ? favorite ?
         o idealy port CMFDefault ptype and make it work ....
   x [] element integration: infinite postpone
   o cpsinstaller
      x [] don't need any more to rename folder actions
      o long term: big refactoring to enable registration of products
   o zpt usage
      o finish display_content macro add a cookie to remind option
        icon/detail + sort order + filter ?
      o clean header of use-macro with tag <html xmlns ...
      x [] handle batch sorting 
        sort is done in getFolderContent
      x [] evaluate plone css1 with netscape 4.77
        workable but with a different look, acceptable for now ?
      x [] define compatible html usage with both css
      x [] try to use plone css for main_template
      x [] manage contextual css
      x [] manage printable css
      x [] restrict access to test_*_lib ? 
           use a separate skin devel
   o tests
      o unit tests for Dummy and Folder
      o add puffin test to create big amount of docs ?
         puffin is buggy !#@#
   o misc
      o finalize zmi CPSSite form creation
      o rewrite cpsinstaller
      x [] split skin repository into: cps_devel, cps_css, ...
      x [] use macro library
      x [] add benching tools
      x [] refactoring cpssite suite
      x [] add rpath in the dbg info of master


# bugs or blocking tasks -----------------------------------
- Bug fix
   o puffin is buggy cps return __ac_name after __ac and we can not
      store the login cookie :/
   o url in breadcrumbs broken
   o set local roles page should display aquisition roles
   o fix duplicate registration for 'CPSDefault' and 'CPS Default' in ZMI
   o [seb] in zpt why the hell do we use "id" for debugging purposes ???
     This is a nonsense
     Proposal :
     use        <div cpsid="main_widgets_leftbox" />
     instead of <div id="main_widgets_leftbox" />
   x [] find a way not using tal before xml declaration in zpt
      ok htmlns will be removed
   x [] getInfoFor review_state failed if not owner or manager ????
   x [] folder_contents permission denied for SectionReader on folder
     with pending (in_submit) document
   x [] content_publish_form should display only section with
     SectionReader rights
   x [] folder_contents display links with broken path 
     if there are a missing trailing '/' in the URL
   x [] fix folder_edit_form do not save change

- Open questions
   o check that we can have many root sections and many workspace sections
   o how to remove roles for a user in a folder ?
      TBD using local roles black list
   x [] how to handle proxy history for reject or accept transition ?
   x [] unpublish what's happen to the history of a doc 
      how to remember that it was published and by who and when
      need workflow_history tool
      -> use the workflow history tool + user notification TBD
   x [] how and when shoud we delete a doc in the repository
     using a garbage collector checking doc without proxies ?
   x [] still need simple scenarii wf/multi version/multi language
   x [] how to accept multiple submit for a doc ?
      handle simple accept by section like CMF
   x [] how to allow unpublish for author
      allow unpublish only for reviewer 

- Make CPSDemo product
   this product should be a skeleton for any new cps site
   o define basic document type like News, File ... using CPSDocuments
   o Integration of * NuxCPS2 products
   o example of cpsdemoupdate script
