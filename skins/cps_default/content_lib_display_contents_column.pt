<!-- a content_lib macro -->
<!-- $Id$ -->

<!-- Final display of items in a column using the given format -->

<metal:block define-macro="display_contents_column">
  <tal:block define="no_form no_form|nothing;
                     site_wide site_wide|nothing;
                     format python:format or 'detail';
                     choosen_ids python:request.SESSION.get('choosen_ids', []);
                     dummy python:request.SESSION.update({'choosen_ids': []});
                     no_table python:format == 'detail_tab';
                     use_radio use_radio|nothing;
                     input_type python: test(use_radio, 'radio', 'checkbox');
                     input_name python: test(use_radio, 'ids', 'ids:list');
    ">
  <table tal:condition="not:no_table" width="100%" cellspacing="0"
    cellpadding="5" summary="content column layout">
    <tr valign="top" tal:repeat="item batch_items">
      <td tal:condition="not:no_form" align="left" valign="top" width="5">
    <input type="" name="" value="" id="" class="noborder"
           tal:define="id item/getId"
           tal:attributes="value 
             python:site_wide and item.getContextUrl(utool=utool) or id;
             id python:'cb_' + id;
             checked python:id in choosen_ids;
             type python:input_type;
             name python:input_name;
           " />
      </td>
      <td align="left" valign="top"
          tal:define="info python:here.getContentInfo(item, level=1, cpsmcat=cpsmcat)">
        <metal:block use-macro="python:path('here/content_lib_info_%s/macros/info_%s'%(format,format))" />
      </td>
    </tr>
  </table>
  <tal:block condition="no_table">
    <tal:block repeat="item batch_items">
    <tal:block define="info python:here.getContentInfo(item, level=1, cpsmcat=cpsmcat);
                       start repeat/item/start|nothing;
                       end repeat/item/end|nothing">
      <metal:block use-macro="here/content_lib_info_detail_tab/macros/info_detail_tab" />
    </tal:block>
    </tal:block>
  <br />
  </tal:block>
  </tal:block>
</metal:block>
