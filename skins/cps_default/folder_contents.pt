<metal:block use-macro="here/content_lib/macros/master">
<div metal:fill-slot="header"
     tal:define="display_change python:request.get('change_display', '0');
                 params here/getDisplayParams;
	         sort_by params/sort_by;
                 direction params/direction;
                 format params/format;
                 ">
<div align="left" class="documentActions">
<form action="" method="post" name="formf"
      tal:attributes="action string:${here/absolute_url};">
<table bgcolor="white">
  <tr valign="top">
    <td>
      <span i18n:translate="label_sort_by">sort by</span>
       <select name="display_order">
            <option i18n:translate="label_none" value="None" selected
                    tal:condition="python:sort_by is None">
                    Default
            </option>
	    <option i18n:translate="label_none" value="None"
                    tal:condition="python:sort_by is not None">
                    Default
            </option>

            <option i18n:translate="label_title_asc" value="title_asc" selected
                    tal:condition="python:sort_by == 'title' and direction == 'asc'">
                    Title
            </option>
	    <option i18n:translate="label_title_asc" value="title_asc"
                    tal:condition="python:sort_by != 'title' or direction !='asc'">
                    Title
            </option>

	    <option i18n:translate="label_title_desc" value="title_desc" selected
                    tal:condition="python:sort_by == 'title' and direction == 'desc'">
                    Title
            </option>
	    <option i18n:translate="label_title_desc" value="title_desc"
                    tal:condition="python:sort_by != 'title' or direction !='desc'">
                    Title
            </option>

	    <option i18n:translate="label_date_asc" value="date_asc" selected
                    tal:condition="python:sort_by == 'date' and direction == 'asc' ">
                    Date
            </option>
	    <option i18n:translate="label_date_asc" value="date_asc"
                    tal:condition="python:sort_by != 'date' or direction != 'asc'">
                    Date
            </option>

	    <option i18n:translate="label_date_desc" value="date_desc" selected
                    tal:condition="python:sort_by == 'date' and direction == 'desc' ">
                    Date
            </option>
	    <option i18n:translate="label_date_desc" value="date_desc"
                    tal:condition="python:not sort_by != 'date' or direction != 'desc'">
                    Date
            </option>

	    <option i18n:translate="label_status_asc" value="status_asc" selected
                    tal:condition="python:sort_by == 'status' and direction =='asc'">
                    Status
            </option>
	    <option i18n:translate="label_status_asc" value="status_asc"
                    tal:condition="python:sort_by != 'status' or direction !='asc' ">
                    Status
            </option>

	    <option i18n:translate="label_status_desc" value="status_desc" selected
                    tal:condition="python:sort_by == 'status' and direction =='desc'">
                    Status
            </option>
	    <option i18n:translate="label_status_desc" value="status_desc"
                    tal:condition="python:sort_by != 'status' or direction !='desc' ">
                    Status
            </option>
          </select>

	  <span i18n:translate="label_display" valign="top">Display with</span>
	  <select name="display_style">
             <option i18n:translate="label_icons" value="icon" selected
	             tal:condition="python:format == 'icon'">
                     Icon
             </option>
	     <option i18n:translate="label_icons" value="icon"
	             tal:condition="python:format != 'icon'">
                     Icon
             </option>
	     <option i18n:translate="label_compact" value="compact" selected
                     tal:condition="python:format == 'compact'">
                     Compact
             </option>
	     <option i18n:translate="label_compact" value="compact"
                     tal:condition="python:format != 'compact'">
                     Compact
             </option>
	     <option i18n:translate="label_detailed" value="detail" selected
                     tal:condition="python:format == 'detail' or format == 'None'">
                     Detail
             </option>
	     <option i18n:translate="label_detailed" value="detail"
                     tal:condition="python:format != 'detail'">
                     Detail
             </option>
           </select>
      <input type="submit" value="button_change" i18n:attributes="value"
        tal:attributes="name string:changeDisplayParams:method" />
         </td>
        </tr>
      </table>
     </form>
</div>
<h1 tal:content="here/title_or_id">Page Title</h1>
<div class="description" tal:content="doc/Description">
  Document Description goes here.
</div>
</div>

<div metal:fill-slot="main"
     tal:define="list_here python:checkPerm('List folder contents', here);
                 list_parent python:checkPerm('List folder contents', here, 'aq_parent')">

<div tal:condition="not: list_here"
  tal:define="response request/RESPONSE;url here/absolute_url;">
  <span tal:define="redirect python: response.redirect(url)"></span>
</div>

<div class="Desktop">


  <tal:block condition="python: checkPerm('List folder contents', here,
'aq_parent')">
     <a href="../xx"
        tal:attributes="href python:test(hasattr(here.aq_parent.aq_parent,
           'portal_url'), '../folder_contents', '..')">
     <img src="" alt="[Link]" border="0"
       tal:attributes="src string:${base_url}UpFolder_icon.gif">
       <span i18n:translate="">description_up_to
         <b i18n:name="up_id" tal:content="python:here.aq_parent.getId()">
         Up ID</b>
       </span></a><br><br>
  </tal:block>


  <form action="" method="post"
      tal:attributes="action here/absolute_url">

   <tal:block define="no_form python:not checkPerm('Delete objects', here);
                      nav_action string:folder_contents;
                      items python:here.getFolderContents();">
     <metal:block use-macro="here/content_lib/macros/display_contents" />
   </tal:block>

   <table border="0" cellspacing="0" cellpadding="2">
     <tr>
      <td align="left" valign="top" width="16"></td>
      <td align="left" valign="top">
      <span tal:condition="python: test(checkPerm('Add portal content', here)
            and here.allowedContentTypes(), 1, 0)">
        <input type="submit" name="folder_factories:method" value="button_new"
               i18n:attributes="value">
      </span>
      <span tal:condition="python: checkPerm('Delete objects', here)">
        <input type="submit" name="folder_rename_form:method" value="button_rename"
               i18n:attributes="value">
        <input type="submit" name="folder_delete:method" value="button_delete"
               i18n:attributes="value">
        <tal:block tal:define="params here/getDisplayParams;
                               sort_by params/sort_by;
                               direction params/direction;
                               format params/format;
			       isWsManager python:mtool.checkPermission('WorkspaceManager', here);"
                   condition="python:isWsManager and sort_by is None">
          <br />
	  <input type="submit" value="button_move_up"     i18n:attributes="value"
                 name="moveItemsUp:method" />
	  <input type="submit" value="button_move_down"   i18n:attributes="value"
                 name="moveItemsDown:method" />
          <input type="submit" value="button_move_top"    i18n:attributes="value"
                 name="moveItemsTop:method" />
	  <input type="submit" value="button_move_bottom" i18n:attributes="value"
                 name="moveItemsBottom:method" />
	</tal:block>
      </span>
      </td>
     </tr>
   </table>
  </form>
</div>
</div>
</metal:block>
