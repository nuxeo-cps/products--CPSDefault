# $Id$
# CPSDefault TODO

# milestones -----------------------------------------------
- [lennart] 05/26: join CPSDefault
- [florent] 05/26 +8d: CPSDocuments
- [] 06/18+3w: CPSDefault with portal_boxes/workflow/i18n/users
- [alex] 06/19: Users integration completed
- [] 06/24: CPSDemo with few services tbd ...


# on work priority tasks -----------------------------------
- [lennart+ben] portal_boxes (known as portlets or portal tool)
   o boxes attributes
      o [lennart] display only in subfolder
      x [ben] visible if empty ?
         handle at macro level this attribute should be removed
   o box types
      o ContentBox
         x [] display folder contents
         o display search result (separate search box?)
         o attributes: sort, format, number of doc ...
         o need format like user and document ..?
      o [] ActionBox  
         x [] with categories to be displayed
         o make a specific render for user box with login box
      o [] RSSBox, HelpBox, ImageBox, FlashBox, BookmarkBox ...
   o box management
      o [ben] make cps ui to manage boxes
         o manage cps_boxes container
	    o add a new box page 
	    o box settings page
	    x [] box override should be handle using zmi ui
         o manage personal settings
            x [ben] minimize maximize
	    x [] close
            
   x [] override with personal boxes objects and settings in ~.cps_boxes
      o global settings for which settings that can be overridden to
        enable the site manager to prevent for example moving of boxes
        between slots
   o problems
      x [] getBoxes should return only boxes with Access Content Info and
         View permission, this is needed for anonymous access
         guard are not enought if the guard is ok and you don't have
         view and access permission you will have an exception
         o check if this is fixed now

- [encolpe] search
   x [] make catalog search work with proxies
   x [] CPSCore CPSBaseDocument should implement SearchableText method
   x [] make advanced search with status metadata ...
   o i18n
   o reusable search with result list page for a popup version
      with checkbox/action ?
   o try to use content_lib macros as much as possible

- [julien] users
   x [] add anonymous access
      boxes should take care about guard and permission
   x [] handle group in local roles management
      x [] empty search should return list of groups
   x [alex] local roles page should display aquisition roles 
      x [julien] display the folder where they are define will be cool
        with a link to the folder local roles setting
   o [julien] put member's folder into workspaces
   x [] NuxMetaDirectories integration
      o cpsupdate integration
      o check skin integration and update into
        CPSDefault/skin/cps_nuxmetadirectories
   o how to remove roles for a user in a folder ?
      These are all closely related to the work lennart is doing
      (plugin user folder for SSL+LDAP+ZODB Users+Groups support)
      should talk to lennart first so we don't do anything double

- [herve] i18n usage
   x [herve] audit plone tools
      http://www.zug.cz/Members/Alekibango/Howtos/HowTo.i18n/document_view
      installation failed
   x [] write doc/HOWTO.i18n
      o to be updated
   o i18n skin
      o actions
      o boxes
      o folder add an action localize ?
   o make a cvsupdate loading and creating a message catologue
      for each file xxxx-yy.po
      xxxx:domain yy:locale
      o test import / export diff ...
   o have a full cpsdefault in fr/en
   o toolz for .pot generation
 
- workflow
  x [flo] make a workflow history tool
     using doc_id as pkey
     x [] how to check permission, trying proxy access ?
         for the moment display * history for doc_id
  x [flo] have a consistant history merging translation between wf 
      with src and destination
  x [flo] make accept transition working as un update
      x [] if the document is already published in the section,
          it should be updated
      o it should show as an update in the history
  x [flo] make reject transition working
      by deleting the proxy using the wf
  x [flo] make unpublish transition working
      cf reject
  o display list of pending document for a reviewer
      use a document box displaying the number of pending docs
      with a link to a search result
  o how to notify reject or accept transition ?
      add a submitter variable to the wf updated only on new/creation
      then notify submitter ?
  o implement copy/paste workflow

- misc
   o navigation
      how to stay in folder_content or folder_view mode ?
   o actionify *
      make everything an action header_menu new print (copy/paste)?  ...
   o benching framework
      need script to create big amount of docs


# other tasks ----------------------------------------------
- CPSDefault
   o portal_boxes
      x [lennart+ben] designing
      x [] make .cps_boxes a portal_type with a 'settings' attributes
         settings is a dictionary: path, box_id, xpos, ypos, visible, style?
      x [] make getBoxes work
         search for box object from root to current path
         loading box object and update settings dictionnary
      x [lennart] Set up guards for Permissions, roles and expressions
         x [] implement guards
         x [] Remove the current need to have view permissions. Permissions
           should only be controlled by the guards.
      x [] boxes attributes
         x [] locked
         x [] available in sub folder
      x [] boxes types
         x [] TextBox display static text
         x [] TreeBox
      x [] make a ZMI interface for setting overrides
      x [] slots should be defined and managed in portal_boxes

   o workflow and docs
      o impl skin reject
      o impl skin unpublish
      x [] impl skin accept
      x [] impl skin proxy history i.e wf history
      x [] add wf variables: transition, date, user
      x [] display history of a document = * proxies history
      x [] content_submit_form: add link from existing document to the document
   o folder
      o impl folder_factories_form 
        check perms for creating/display sub section/workspace action
      o add constraint on type of document for workspace/creation
        and sections/publication
      o quota folder
         o display size of contents and folders
      x [] display sections and workspaces tree
      x [] folder_contents with more info
        display proxy rev, lang, status
   o document
      o impl copy/cut/paste ...
         same for rename delete history ...
      x [] full info skin: list all proxy about a document
   o cmf integration
      o clean or integrate fully cmf stuff ? undo ? preference ? favorite ?
      x [] remove my stuff ? preference ? favorite ?
         o idealy port CMFDefault ptype and make it work ....
   x [] element integration: infinite postpone
   o cpsinstaller
      x [] don't need any more to rename folder actions
      o long term: big refactoring to enable registration of products
   o zpt usage
      o finish display_content macro add a cookie to remind option
        icon/detail + sort order + filter ?
      x clean header of use-macro with tag <html xmlns ...
      x [] handle batch sorting 
        sort is done in getFolderContent
      x [] evaluate plone css1 with netscape 4.77
        workable but with a different look, acceptable for now ?
      x [] define compatible html usage with both css
      x [] try to use plone css for main_template
      x [] manage contextual css
      x [] manage printable css
      x [] restrict access to test_*_lib ? 
           use a separate skin devel
   o tests
      o unit tests for Dummy and Folder
      o add puffin test to create big amount of docs ?
         puffin is buggy !#@#
   o misc
      o finalize zmi CPSSite form creation
      o rewrite cpsinstaller
      x [] split skin repository into: cps_devel, cps_css, ...
      x [] use macro library
      x [] add benching tools
      x [] refactoring cpssite suite
      x [] add rpath in the dbg info of master


# bugs or blocking tasks -----------------------------------
- Bug fix
   x []  advanced search, search link broken on result page url like //search_form
   x [fg] error after install in generic_lib no standard:'item/title'
      happened because new skins were not immediately available
   o puffin is buggy cps return __ac_name after __ac and we can not
      store the login cookie :/
   x [] url in breadcrumbs broken
   x set local roles page should display acquisition roles
   o fix duplicate registration for 'CPSDefault' and 'CPS Default' in ZMI
   x [] find a way not using tal before xml declaration in zpt
      ok htmlns will be removed
   x [] getInfoFor review_state failed if not owner or manager ????
   x [] folder_contents permission denied for SectionReader on folder
     with pending (in_submit) document
   x [] content_publish_form should display only section with
     SectionReader rights
   x [] folder_contents display links with broken path 
     if there are a missing trailing '/' in the URL
   x [] fix folder_edit_form do not save change

- Open questions
   o check that we can have many root sections and many workspace sections
   x [] how to handle proxy history for reject or accept transition ?
   x [] unpublish what's happen to the history of a doc 
      how to remember that it was published and by who and when
      need workflow_history tool
      -> use the workflow history tool + user notification TBD
   x [] how and when shoud we delete a doc in the repository
     using a garbage collector checking doc without proxies ?
   x [] still need simple scenarii wf/multi version/multi language
   x [] how to accept multiple submit for a doc ?
      handle simple accept by section like CMF
   x [] how to allow unpublish for author
      allow unpublish only for reviewer 

- Make CPSDemo product
   this product should be a skeleton for any new cps site
   o define basic document type like News, File ... using CPSDocuments
   o Integration of * NuxCPS2 products
   o example of cpsdemoupdate script
