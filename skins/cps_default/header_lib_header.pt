<!-- a header_lib macro -->
<!-- $Id$ -->

<!--
Here is the CSS loading logic:
- default.css follows the CSS2 spec.
- msie.css is used and read *only* by MSIE. This is the place to put instructions
  to correct the rendering problems specific to MSIE.
- custom.css is loaded if it exists.

XXX this should referenced and documented in CPSDefault/doc/
-->
<metal:block define-macro="header" tal:define="charset string:ISO-8859-15">
  <tal:block define="dummy python:request.RESPONSE.setHeader('Content-Type',
    'text/html;; charset=%s' % charset)"/>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-15"/>
  <meta name="generator" content="Nuxeo CPS http://www.cps-project.org/"/>
  <title tal:content="expanded_title|here/expanded_title">CPS Default</title>
  <metal:block define-slot="base"></metal:block>
  <link rel="stylesheet" type="text/css" media="all"
    title="CPSDefault styles"
    tal:attributes="href string:${base_url}default.css" />
  <link tal:condition="btool|nothing" rel="stylesheet" type="text/css"
    media="all" tal:attributes="href string:${base_url}boxes.css" />
  <tal:block replace="structure string:&lt;!--[if IE]&gt;" /><link
    rel="stylesheet" type="text/css"
    tal:attributes="href string:${base_url}msie.css" /><tal:block
    replace="structure string:&lt;![endif]--&gt;" />
  <link rel="stylesheet" type="text/css" media="print"
    tal:attributes="href string:${base_url}default_print.css"/>
  <meta http-equiv="imagetoolbar" content="no" />
  <metal:block define-slot="head_slot"></metal:block>
  <metal:block define-slot="style_slot"></metal:block>
  <link rel="stylesheet" type="text/css" media="all"
    tal:condition="exists: here/custom.css"
    tal:attributes="href string:${base_url}custom.css;"/>
  <link rel="stylesheet" type="text/css" media="all"
    tal:define="custom_css here/getCPSCustomCSS|nothing"
    tal:condition="custom_css"
    tal:attributes="href string:${base_url}${custom_css}"/>
  <metal:block define-slot="javascript_head_slot"></metal:block>
  <script type="text/javascript" src="prototype.js"
    tal:attributes="src string:${base_url}prototype.js"></script>
  <script type="text/javascript" src="effects.js"
    tal:attributes="src string:${base_url}effects.js"></script>
  <script type="text/javascript" src="controls.js"
    tal:attributes="src string:${base_url}controls.js"></script>
  <script type="text/javascript" src="functions.js"
    tal:attributes="src string:${base_url}functions.js"></script>
</metal:block>
